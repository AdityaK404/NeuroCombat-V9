# ğŸ¥Š NeuroCombat Architecture & Flow Diagrams

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     NEUROCOMBAT SYSTEM                           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   VIDEO      â”‚â”€â”€â”€â–¶â”‚    POSE      â”‚â”€â”€â”€â–¶â”‚    MOVE      â”‚      â”‚
â”‚  â”‚   INPUT      â”‚    â”‚  EXTRACTION  â”‚    â”‚ CLASSIFIER   â”‚      â”‚
â”‚  â”‚              â”‚    â”‚  (âœ… DONE)   â”‚    â”‚  (TODO)      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚                     â”‚              â”‚
â”‚                             â–¼                     â–¼              â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚                      â”‚   PLAYER     â”‚    â”‚  COMMENTARY  â”‚      â”‚
â”‚                      â”‚   TRACKER    â”‚    â”‚   ENGINE     â”‚      â”‚
â”‚                      â”‚  (âœ… DONE)   â”‚    â”‚   (TODO)     â”‚      â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚                     â”‚              â”‚
â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                       â–¼                          â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                              â”‚   STREAMLIT  â”‚                    â”‚
â”‚                              â”‚      UI      â”‚                    â”‚
â”‚                              â”‚   (PARTIAL)  â”‚                    â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Pose Extraction Pipeline (Detailed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POSE EXTRACTION PIPELINE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  INPUT VIDEO (.mp4, .avi)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Video Decoder   â”‚ â—„â”€â”€ OpenCV VideoCapture
â”‚ (cv2)           â”‚     â€¢ Read frame by frame
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ Convert BGR â†’ RGB
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MediaPipe Pose  â”‚ â—„â”€â”€ Google MediaPipe
â”‚ Detection       â”‚     â€¢ 33 landmark points
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ Visibility scores
       â”‚                â€¢ Confidence values
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pose Objects    â”‚ â—„â”€â”€ Dataclass: Pose
â”‚ Creation        â”‚     â€¢ keypoints: List[x, y, vis]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ bbox: (x, y, w, h)
       â”‚                â€¢ centroid: (cx, cy)
       â”‚                â€¢ confidence: float
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Player Tracking â”‚ â—„â”€â”€ Hungarian Algorithm
â”‚ (ID Assignment) â”‚     â€¢ Cost matrix: Euclidean distance
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ linear_sum_assignment()
       â”‚                â€¢ MAX_DISTANCE threshold
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dual Fighter    â”‚ â—„â”€â”€ Consistent IDs
â”‚ Separation      â”‚     â€¢ Player 1 (Red)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ Player 2 (Blue)
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                 â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JSON Export  â”‚  â”‚ Overlay Videoâ”‚  â”‚  Statistics  â”‚
â”‚              â”‚  â”‚  Generation  â”‚  â”‚  Reporting   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                  â”‚
       â–¼                 â–¼                  â–¼
 poses_*.json     overlay_*.mp4      Console Output
```

## Hungarian Algorithm Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         HUNGARIAN ALGORITHM FOR PLAYER TRACKING              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frame N-1:                        Frame N:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Player 1    â”‚                  â”‚   Pose A    â”‚
â”‚ @ (x1, y1)  â”‚                  â”‚ @ (xa, ya)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Player 2    â”‚                  â”‚   Pose B    â”‚
â”‚ @ (x2, y2)  â”‚                  â”‚ @ (xb, yb)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”‚                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Build Cost Matrix  â”‚
        â”‚                     â”‚
        â”‚   Cost[i,j] =       â”‚
        â”‚   distance(i, j)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       Matrix        â”‚
        â”‚                     â”‚
        â”‚     Pose A  Pose B  â”‚
        â”‚ P1:  d1a    d1b     â”‚
        â”‚ P2:  d2a    d2b     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Hungarian Algorithm â”‚
        â”‚ (Optimal Assignment)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Find Minimum Cost  â”‚
        â”‚  Total Assignment   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    Assignment:      â”‚
        â”‚  Player 1 â†’ Pose A  â”‚
        â”‚  Player 2 â†’ Pose B  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA FLOW                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INPUT:
  fight.mp4 (1920x1080, 30fps, 750 frames)
     â”‚
     â–¼
PROCESSING:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Frame 1:                              â”‚
  â”‚  â€¢ Detect poses â†’ [Pose A, Pose B]     â”‚
  â”‚  â€¢ Initialize â†’ P1=A, P2=B             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Frame 2-750:                          â”‚
  â”‚  â€¢ Detect poses                        â”‚
  â”‚  â€¢ Track with Hungarian                â”‚
  â”‚  â€¢ Maintain P1/P2 IDs                  â”‚
  â”‚  â€¢ Store keypoints                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
OUTPUT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  poses_fight.json                      â”‚
  â”‚  {                                     â”‚
  â”‚    "frames": {                         â”‚
  â”‚      "frame_000001": {                 â”‚
  â”‚        "player_1": {                   â”‚
  â”‚          "keypoints": [[x,y,v], ...],  â”‚
  â”‚          "bbox": [x,y,w,h],            â”‚
  â”‚          "centroid": [cx,cy],          â”‚
  â”‚          "confidence": 0.92            â”‚
  â”‚        },                              â”‚
  â”‚        "player_2": {...}               â”‚
  â”‚      },                                â”‚
  â”‚      "frame_000002": {...},            â”‚
  â”‚      ...                               â”‚
  â”‚    },                                  â”‚
  â”‚    "statistics": {...}                 â”‚
  â”‚  }                                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  overlay_fight.mp4                     â”‚
  â”‚  â€¢ Original video                      â”‚
  â”‚  â€¢ + Red skeleton (Player 1)           â”‚
  â”‚  â€¢ + Blue skeleton (Player 2)          â”‚
  â”‚  â€¢ + Bounding boxes                    â”‚
  â”‚  â€¢ + Labels & frame counter            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## MediaPipe Pose Keypoints

```
         0: nose
        / \
       /   \
   1-2-3   4-5-6    (eyes & ears)
       |
       7-8           (mouth)
       |
      11---12        (shoulders)
       |    |
      13    14       (elbows)
       |    |
      15    16       (wrists)
       |    |
      17-19 18-20    (hands & fingers)
       |    |
      23----24       (hips) â—„â”€â”€ Used for centroid!
       |    |
      25    26       (knees)
       |    |
      27    28       (ankles)
       |    |
      29-31 30-32    (feet & toes)

Total: 33 landmarks
Each: [x, y, visibility]

Hip-based centroid:
  centroid = (kp[23] + kp[24]) / 2
  â€¢ More stable than full-body
  â€¢ Less affected by arm movements
  â€¢ Ideal for fighter tracking
```

## CLI Command Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CLI EXECUTION FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

$ python run_pose_extraction.py --video data/raw/fight.mp4 --display
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse Arguments â”‚ â—„â”€â”€ argparse
â”‚                 â”‚     â€¢ video path
â”‚                 â”‚     â€¢ display flag
â”‚                 â”‚     â€¢ confidence
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ output paths
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validate Input  â”‚ â—„â”€â”€ Check file exists
â”‚                 â”‚     Path handling
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Initialize      â”‚ â—„â”€â”€ PoseExtractor()
â”‚ Extractor       â”‚     confidence_threshold
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Process Video   â”‚ â—„â”€â”€ extract_poses_from_video()
â”‚                 â”‚     â€¢ Frame loop
â”‚                 â”‚     â€¢ Pose detection
â”‚                 â”‚     â€¢ Player tracking
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ Progress bar
   â”‚
   â”œâ”€â”€â”€ If display â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                      â–¼
   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚              â”‚ cv2.imshow()    â”‚
   â”‚              â”‚ Real-time viz   â”‚
   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”œâ”€â”€â”€ If overlay â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                      â–¼
   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚              â”‚ VideoWriter     â”‚
   â”‚              â”‚ Save overlay    â”‚
   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save JSON       â”‚ â—„â”€â”€ json.dump()
â”‚ Export Stats    â”‚     Print summary
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Print Summary   â”‚ â—„â”€â”€ Detection rate
â”‚ & Next Steps    â”‚     Keypoint counts
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     File paths
```

## Class Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLASS STRUCTURE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

@dataclass Pose
â”œâ”€â”€ keypoints: List[List[float]]      # 33x3 matrix
â”œâ”€â”€ bbox: Tuple[int, int, int, int]   # x, y, w, h
â”œâ”€â”€ centroid: Tuple[float, float]     # cx, cy
â””â”€â”€ confidence: float                 # 0.0-1.0

class PoseExtractor
â”œâ”€â”€ __init__(confidence_threshold)
â”‚   â”œâ”€â”€ self.mp_pose
â”‚   â”œâ”€â”€ self.pose_detector
â”‚   â”œâ”€â”€ self.player_positions = {"player_1": None, "player_2": None}
â”‚   â””â”€â”€ self.frame_count = 0
â”‚
â”œâ”€â”€ extract_poses_from_video(video_path, output_json, overlay_video, display)
â”‚   â”œâ”€â”€ Open video (cv2.VideoCapture)
â”‚   â”œâ”€â”€ Loop through frames
â”‚   â”‚   â”œâ”€â”€ _detect_poses_in_frame()
â”‚   â”‚   â”œâ”€â”€ _track_players()
â”‚   â”‚   â””â”€â”€ _draw_overlay()
â”‚   â”œâ”€â”€ Save JSON
â”‚   â””â”€â”€ Return pose_data dict
â”‚
â”œâ”€â”€ _detect_poses_in_frame(rgb_frame, frame_shape) â†’ List[Pose]
â”‚   â”œâ”€â”€ MediaPipe process()
â”‚   â”œâ”€â”€ Convert landmarks to pixels
â”‚   â”œâ”€â”€ _calculate_bbox()
â”‚   â”œâ”€â”€ _calculate_centroid()
â”‚   â””â”€â”€ Return [Pose, ...]
â”‚
â”œâ”€â”€ _track_players(poses) â†’ Dict[str, Optional[Pose]]
â”‚   â”œâ”€â”€ Build cost matrix
â”‚   â”œâ”€â”€ linear_sum_assignment() â—„â”€â”€ Hungarian
â”‚   â”œâ”€â”€ Apply distance threshold
â”‚   â””â”€â”€ Return {"player_1": Pose, "player_2": Pose}
â”‚
â”œâ”€â”€ _calculate_bbox(keypoints, width, height) â†’ Tuple
â”œâ”€â”€ _calculate_centroid(keypoints) â†’ Tuple
â”œâ”€â”€ _draw_overlay(frame, player_poses) â†’ np.ndarray
â””â”€â”€ _print_summary(stats)

Functions (Standalone API):
â”œâ”€â”€ extract_poses(video_path, display) â†’ dict
â”œâ”€â”€ track_players(prev_positions, curr_positions) â†’ Dict
â””â”€â”€ save_pose_json(pose_dict, output_path)
```

## Performance Optimization Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              OPTIMIZATION HIERARCHY                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FASTEST (No visualization):
  â€¢ No overlay video
  â€¢ No real-time display
  â€¢ Process in background
  âš¡ 25-30 FPS @ 720p

FAST (Overlay only):
  â€¢ Generate overlay video
  â€¢ No real-time display
  â€¢ Write frames to disk
  âš¡ 15-20 FPS @ 720p

MODERATE (Display only):
  â€¢ Real-time display
  â€¢ No overlay video save
  â€¢ cv2.imshow() overhead
  âš¡ 12-15 FPS @ 720p

SLOW (Both):
  â€¢ Overlay video
  â€¢ Real-time display
  â€¢ Double rendering
  âš¡ 8-12 FPS @ 720p

RECOMMENDATION FOR DEMO:
  â€¢ Use --display for live demo
  â€¢ Disable overlay video
  â€¢ Use 720p resolution
  â€¢ Expected: 12-15 FPS (smooth)
```

## Integration Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              INTEGRATION WITH OTHER MODULES                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

THIS MODULE (Pose Extraction):
  OUTPUT: pose_data dict
    {
      "frames": {
        "frame_000001": {
          "player_1": {"keypoints": [[x,y,v], ...]},
          "player_2": {"keypoints": [[x,y,v], ...]}
        }
      }
    }
         â”‚
         â–¼
NEXT MODULE (Move Classifier):
  INPUT: pose sequences
    p1_seq = [frame["player_1"]["keypoints"] for frame in frames]
    p2_seq = [frame["player_2"]["keypoints"] for frame in frames]
         â”‚
         â–¼
  PROCESSING:
    â€¢ Sliding window (15 frames)
    â€¢ Extract features (angles, velocities)
    â€¢ Classify: Jab, Cross, Kick, etc.
         â”‚
         â–¼
  OUTPUT: move events
    [
      (frame_num, player_id, move_type, confidence),
      (45, "player_1", "jab", 0.89),
      (62, "player_2", "cross", 0.92),
      ...
    ]
         â”‚
         â–¼
FINAL MODULE (Commentary Engine):
  INPUT: move events + context
  PROCESSING:
    â€¢ Template selection
    â€¢ Context awareness
    â€¢ Natural language generation
  OUTPUT: commentary text
    "Player 1 delivers a clean jab to the upper body!"
    "Player 2 counters with a powerful cross!"
```

---

## Visual Legend

```
Symbol Meanings:
  â—„â”€â”€  Input/Source
  â”€â”€â”€â–¶ Data Flow
  â”‚    Sequential Flow
  â–¼    Next Step
  â”œâ”€â”€  Branch/Fork
  â””â”€â”€  End of Branch

Status Indicators:
  âœ…   Complete/Implemented
  âš ï¸   Partial/In Progress
  âŒ   Not Started
  âš¡   Performance Metric
  ğŸ¯   Key Feature

Box Types:
  â”Œâ”€â”€â”€â”€â”€â”
  â”‚     â”‚  Process/Module
  â””â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”
  â”‚     â”‚  Data Structure
  â””â”€â”€â”€â”€â”€â”˜
```

---

This visual documentation provides a comprehensive overview of the pose extraction system's architecture, data flow, and integration points. Use these diagrams during your hackathon presentation to explain the technical implementation! ğŸ¯
